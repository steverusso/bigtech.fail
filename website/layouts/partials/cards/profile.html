{{ $launchIcon := partialCached "icon.html" "launch" "launch" }}

{{ $href := .RelPermalink }}
{{ $name := .Title }}
{{ $img := partialCached "profile-pic.html" . $name }}
{{ $preview := .Summary | truncate 80 }}

<a class="profile card" href="{{ $href }}">
	<!-- Title area: profile pic, name, nickname (if any) and the launch icon. -->
	<header>
		<img src="{{ $img }}" loading="lazy">

		<div>
			<h2>{{ $name }}</h2>
			{{ with .Params.aka }}<p>{{ . }}</p>{{ end }}
		</div>

		{{ $launchIcon }}
	</header>

	<p>{{ $preview }}</p>
</a>

<!--
 The profile's online / social media links.

 It is illegal for `a` elements to contain other `a` elements. Since the
 profile card itself is an `a` element, the social links (which are a bunch of
 `a` elements) need to be outside the card.
-->
{{ partialCached "profile-links.html" .Params.socials $name }}
