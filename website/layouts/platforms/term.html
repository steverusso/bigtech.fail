{{ define "style" }}
	{{ partialCached "css/inline" "pages/platforms.css" "platforms" }}
{{ end }}

{{ define "main" }}
	{{ $slug := .Title | anchorize }}
	{{ $img := $slug | printf "/img/logos/%s.png" }}
	{{ $alts := index .Site.Taxonomies.altfor $slug }}

	<div class="platform cntr">
		<header>
			<img src="{{ $img }}" width="64" height="64" loading="lazy">
			<h1>{{ .Title | title }}</h1>
		</header>

		{{ if .Content | ne "" }}
			<div class="row content">
				<!-- The summary article on the platform. -->
				<article class="col md-7 lg-8">{{ .Content }}</article>

				<!-- The alternatives. This appears as a sidebar on larger screens. -->
				<section class="col md-5 lg-4">
					<div class="alts-wrap">
						{{ with $alts }}
							<h3 data-count="{{ len . }}">Alternative Platforms</h3>

							<div class="grid sm-6 md-12 alts">
								{{ range . }}
									<div>{{ partialCached "cards/alttech" . .RelPermalink }}</div>
								{{ end }}
							</div>
						{{ end }}
					</div>
				</section>
			</div>
		{{ else }}
			<div class="no-writeup">
				{{ with $alts }}
					<h3 data-count="{{ len . }}">Alternative Platforms</h3>

					<div class="grid sm-6 md-4 alts">
						{{ range . }}
							<div>{{ partialCached "cards/alttech" . .RelPermalink }}</div>
						{{ end }}
					</div>
				{{ end }}
			</div>
		{{ end }}

		<h1 data-count="{{ len .Pages }}">Events</h1>
		<hr>
		{{ partial "timeline" .Pages }}
	</div>
{{ end }}
