{{ define "style" }}
<style>
aside:empty {
	display: none;
}
main {
	justify-content: center;
}
[data-stuff] > div > a:not(:first-child) {
	margin-top: 1rem;
}
</style>
{{ end }}

{{ define "main" }}
	{{ $slug := .Title | anchorize }}
	{{ $img := $slug | printf "/img/logos/%s.png" }}

	<input id="sbToggle" type="checkbox">
	{{ with (index .Site.Taxonomies.altfor $slug) }}
		<label for="sbToggle"></label>
	{{ end }}

	<main>
		<section>
			<header>
				<img src="{{ $img }}" width="64" height="64" loading="lazy">
				<h1>{{ .Title | title }}</h1>
			</header>

			{{ with .Content }}
				<article>{{ . }}</article>
			{{ end }}

			<h2 data-count="{{ len .Pages }}">Events</h2>
			<hr>
			{{ partial "timeline" .Pages }}
		</section>

		<aside>
			{{ with (index .Site.Taxonomies.altfor $slug) }}
				<div data-stuff>
					<h3>Alternatives:</h3>
					<div>
						{{ range . }}
							{{ partialCached "cards/alttech" . .RelPermalink }}
						{{ end }}
					</div>
				</div>
			{{ end }}
		</aside>
	</main>
{{ end }}
