{{ define "style" }}
	{{ partialCached "css/events" . }}
{{ end }}

{{ define "ogdesc" }}
	{{ .Summary | truncate 69 | plainify }}
{{ end }}

{{ define "partials/event-tags" }}
	<h3>Tags:</h3>
	<div class="tags">
		{{ range . }}
			<div>
				{{ partialCached "tag-card" . . }}
			</div>
		{{ end }}
	</div>
{{ end }}

{{ define "partials/event-profiles" }}
	<h3>Profiles:</h3>
	<div class="profiles">
		{{ range . }}
			{{ with site.GetPage (printf "/profiles/%s" .) }}
				<div>
					{{ partialCached "cards/profile" . . }}
				</div>
			{{ end }}
		{{ end }}
	</div>
{{ end }}

{{ define "main" }}
	<input id="sbToggle" type="checkbox">
	<label for="sbToggle"></label>

	<main>
		<section>
			<header>
				<img src="{{ .Params.image }}" width="128" height="128" loading="lazy">
				<h1 data-date="{{ .Date.Format `2 Jan 2006` }}">{{ .Title }}</h1>
			</header>

			<article>{{ .Content }}</article>

			<h3>Sources:</h3>
			<ol class="sources">
				{{ range .Params.sources }}
					{{ $href := index . 1 }}
					{{ $text := index . 0 | default $href }}
					<li><a href="{{ $href }}" target="_blank">{{ $text }}</a></li>
				{{ end }}
			</ol>
		</section>

		<aside>
			<div data-stuff>
				<h3>Corporations:</h3>
				<div>
					{{ range .Params.platforms }}
						{{ partialCached "bigtech-chip" . . }}
					{{ end }}
				</div>

				{{ with .Params.tags }}
					{{ partialCached "event-tags" . . }}
				{{ end }}

				{{ with .Params.profiles }}
					{{ partialCached "event-profiles" . . }}
				{{ end }}
			</div>
		</aside>
	</main>
{{ end }}
