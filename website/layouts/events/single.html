{{ define "style" }}
	{{ partialCached "css/events" . }}
{{ end }}

{{ define "ogdesc" }}
	{{ .Summary | truncate 69 | plainify }}
{{ end }}

{{ define "partials/event-platforms" }}
	<div class="platforms">
		<h3>Platforms:</h3>
		<div>
			{{ range . }}
				{{ partialCached "bigtech-chip" . . }}
			{{ end }}
		</div>
	</div>
{{ end }}

{{ define "partials/event-tags" }}
	<hr>
	<div class="tags">
		<h3>Tags:</h3>
		<div>
			{{ range . }}
				<div>
					{{ partialCached "tag-card" . . }}
				</div>
			{{ end }}
		</div>
	</div>
{{ end }}

{{ define "partials/event-profiles" }}
	<hr>
	<div class="profiles">
		<h3>Profiles:</h3>
		<div>
			{{ range . }}
				{{ with site.GetPage (printf "/profiles/%s" .) }}
					<div>
						{{ partialCached "cards/profile" . . }}
					</div>
				{{ end }}
			{{ end }}
		</div>
	</div>
{{ end }}

{{ define "main" }}
	<div class="event cntr">
		<input id="toggleInfo" type="checkbox">
		<label for="toggleInfo"></label>

		<div class="row">
			<div class="crux col lg-8">
				<header>
					<img src="{{ .Params.image }}" width="128" height="128" loading="lazy">
					<h1 data-date="{{ .Date.Format `2 Jan 2006` }}">{{ .Title }}</h1>
				</header>

				<article>{{ .Content }}</article>

				<h3>Sources:</h3>
				<ol class="sources">
					{{ range .Params.sources }}
						{{ $href := index . 1 }}
						{{ $text := index . 0 | default $href }}
						<li><a href="{{ $href }}" target="_blank">{{ $text }}</a></li>
					{{ end }}
				</ol>
			</div>

			<div class="info col lg-4">
				<section>
					{{ with .Params.platforms }}
						{{ partialCached "event-platforms" . . }}
					{{ end }}

					{{ with .Params.tags }}
						{{ partialCached "event-tags" . . }}
					{{ end }}

					{{ with .Params.profiles }}
						{{ partialCached "event-profiles" . . }}
					{{ end }}
				</section>
			</div>
		</div>
	</div>
{{ end }}
