{{ define "ogdesc" }}
	{{ .Summary | truncate 69 | plainify }}
{{ end }}

{{ define "partials/event-profiles" }}
	{{ range . }}
		{{ with site.GetPage (printf "/profiles/%s" .) }}
			{{ partialCached "cards/profile" . . }}
		{{ end }}
	{{ end }}
{{ end }}

{{ define "main" }}
	<input id="sbToggle" type="checkbox">
	<label for="sbToggle"></label>

	<main class="evtpg">
		<section>
			<header>
				<img src="{{ .Params.image }}" width="128" height="128" loading="lazy">
				<h1 data-date="{{ .Date.Format `2 Jan 2006` }}">{{ .Title }}</h1>
			</header>

			<article>{{ .Content }}</article>

			<details data-srcs><summary></summary>
				<ol>
					{{ range .Params.sources }}
						{{ $href := index . 1 }}
						{{ $text := index . 0 | default $href }}
						<li><a href="{{ $href }}" target="_blank">{{ $text }}</a></li>
					{{ end }}
				</ol>
			</details>
		</section>

		<aside>
			<div data-stuff>
				<h3>Corporations:</h3>
				<div class="corpos grid xs-3">
					{{ range .Params.corpos }}
						<div>{{ partialCached "cards/corpo" . . }}</div>
					{{ end }}
				</div>

				<h3>Tags:</h3>
				<div class="tags">
					{{ range .Params.tags }}
						{{ partialCached "cards/tag" . . }}
					{{ end }}
				</div>

				{{ with .Params.profiles }}
					<h3>Profiles:</h3>
					<div class="profiles">
						{{ partialCached "event-profiles" . . }}
					</div>
				{{ end }}
			</div>
		</aside>
	</main>
{{ end }}
