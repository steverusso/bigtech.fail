{{ define "style" }}
	{{ partialCached "css-inline.html" "pages/events.css" "events" }}
{{ end }}

{{ define "main" }}
	{{ $eventIcon := partialCached "icon.html" "event" "event" }}
	{{ $clockIcon := partialCached "icon.html" "schedule" "schedule" }}

	{{ $when := .Params.date | dateFormat "Jan 2, 2006" }}
	{{ $readTime := .ReadingTime | printf "~ %dm read" }}
	{{ $class := and (.Param `profiles`) `has-profiles` }}

	<div class="event cntr {{ $class }}">
		<main>
			<!-- The title -->
			<header>
				<img src="{{ .Params.image }}" width="128" height="128" loading="lazy">
				<h1>{{ .Title }}</h1>
			</header>

			<hr>

			<!-- Meta data: date the event took place, how long it takes to read. -->
			<div class="event-meta">
				<div>{{ $eventIcon }} {{ $when }}</div>
				<div>{{ $clockIcon }} {{ $readTime }}</div>
			</div>

			<!-- The article -->
			<article>{{ .Content }}</article>

			<hr>

			<!-- Sources -->
			<div class="event-sources">
				<h3>Sources :</h3>
				<ol>
					{{ range .Params.sources }}
						{{ $href := index . 1 }}
						{{ $text := index . 0 | default $href }}

						<li><a href="{{ $href }}" target="_blank">{{ $text }}</a></li>
					{{ end }}
				</ol>
			</div>
		</main>

		<!-- The profiles of the people involved in the event (if any). -->
		{{ with .Params.profiles }}
			{{ partialCached "event/profiles.html" . . }}
		{{ end }}
	</div>
{{ end }}
